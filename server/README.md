# å“ˆæ¯”åˆ—è½¦Wiki - é‚®ç®±éªŒè¯æœåŠ¡

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

- âœ… QQé‚®ç®±éªŒè¯ï¼ˆä»…æ”¯æŒ@qq.comï¼‰
- âœ… 6ä½éšæœºæ•°éªŒè¯ç ç”Ÿæˆ
- âœ… SMTPé‚®ä»¶å‘é€
- âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
- âœ… å¯†ç é‡ç½®åŠŸèƒ½
- âœ… éªŒè¯ç è¿‡æœŸæœºåˆ¶ï¼ˆ10åˆ†é’Ÿï¼‰
- âœ… å‘é€é¢‘ç‡é™åˆ¶ï¼ˆ60ç§’ï¼‰
- âœ… éªŒè¯æ¬¡æ•°é™åˆ¶ï¼ˆ5æ¬¡ï¼‰
- âœ… ç²¾ç¾çš„HTMLé‚®ä»¶æ¨¡æ¿
- âœ… é‚®ç®±æ ¼å¼ä¸¥æ ¼éªŒè¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd server
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `env.example` ä¸º `.env`ï¼š

```bash
cp env.example .env
```

`.env` æ–‡ä»¶å·²é…ç½®å¥½QQé‚®ç®±ï¼š

```env
PORT=3000
NODE_ENV=production

# CORSé…ç½®
CORS_ORIGIN=https://hbwiki.yw-games.top

# QQé‚®ç®±SMTPé…ç½®
MAIL_SMTP=smtp.qq.com
MAIL_PORT=465
USE_TLS=true
MAIL_ACCOUNT=3159559622@qq.com
MAIL_PASSWORD=cnvzrzxcsvgbddec
EMAIL_FROM="å“ˆæ¯”åˆ—è½¦Wiki <3159559622@qq.com>"
```

### 3. å¯åŠ¨æœåŠ¡

å¼€å‘æ¨¡å¼ï¼š
```bash
npm run dev
```

ç”Ÿäº§æ¨¡å¼ï¼š
```bash
npm start
```

### 4. æµ‹è¯•æœåŠ¡

å¥åº·æ£€æŸ¥ï¼š
```
http://localhost:3000/api/health
```

æµ‹è¯•SMTPè¿æ¥ï¼š
```
http://localhost:3000/api/test-email
```

## ğŸ“¡ APIæ¥å£æ–‡æ¡£

### 1. å‘é€æ³¨å†ŒéªŒè¯ç 

**æ¥å£ï¼š** `POST /api/auth/send-code`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "123456789@qq.com"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "éªŒè¯ç å·²å‘é€ï¼Œè¯·æŸ¥æ”¶é‚®ä»¶",
  "data": {
    "email": "123***9@qq.com",
    "expiryMinutes": 10
  }
}
```

### 2. éªŒè¯éªŒè¯ç 

**æ¥å£ï¼š** `POST /api/auth/verify-code`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "123456789@qq.com",
  "code": "123456"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "éªŒè¯æˆåŠŸ"
}
```

### 3. ç”¨æˆ·æ³¨å†Œ

**æ¥å£ï¼š** `POST /api/auth/register`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "123456789@qq.com",
  "username": "ç©å®¶åç§°",
  "password": "password123"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1234567890,
    "email": "123456789@qq.com",
    "username": "ç©å®¶åç§°"
  }
}
```

### 4. å‘é€å¯†ç é‡ç½®éªŒè¯ç 

**æ¥å£ï¼š** `POST /api/auth/send-reset-code`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "123456789@qq.com"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "éªŒè¯ç å·²å‘é€ï¼Œè¯·æŸ¥æ”¶é‚®ä»¶"
}
```

### 5. é‡ç½®å¯†ç 

**æ¥å£ï¼š** `POST /api/auth/reset-password`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "123456789@qq.com",
  "code": "123456",
  "newPassword": "newpassword123"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "å¯†ç é‡ç½®æˆåŠŸ"
}
```

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. é‚®ç®±é™åˆ¶
- âœ… ä»…æ”¯æŒQQé‚®ç®±ï¼ˆ@qq.comï¼‰
- âœ… ä¸¥æ ¼çš„é‚®ç®±æ ¼å¼éªŒè¯
- âœ… æ”¯æŒæ•°å­—QQå·å’Œè‹±æ–‡é‚®ç®±

### 2. éªŒè¯ç å®‰å…¨
- âœ… ä½¿ç”¨cryptoç”ŸæˆçœŸéšæœºæ•°
- âœ… 6ä½çº¯æ•°å­—éªŒè¯ç 
- âœ… 10åˆ†é’Ÿæœ‰æ•ˆæœŸ
- âœ… ä½¿ç”¨åè‡ªåŠ¨å¤±æ•ˆ

### 3. é˜²æ»¥ç”¨æœºåˆ¶
- âœ… 60ç§’å‘é€é—´éš”é™åˆ¶
- âœ… æœ€å¤š5æ¬¡éªŒè¯å°è¯•
- âœ… è‡ªåŠ¨æ¸…ç†è¿‡æœŸéªŒè¯ç 

### 4. å¯†ç å®‰å…¨
- âœ… å¯†ç é•¿åº¦6-32ä¸ªå­—ç¬¦
- âœ… ç”¨æˆ·åé•¿åº¦2-20ä¸ªå­—ç¬¦
- âœ… è¾“å…¥éªŒè¯å’Œè½¬ä¹‰

## ğŸ“§ é‚®ä»¶æ¨¡æ¿

ç³»ç»Ÿä½¿ç”¨ç²¾ç¾çš„HTMLé‚®ä»¶æ¨¡æ¿ï¼ŒåŒ…å«ï¼š
- ğŸ¨ æ¸å˜è‰²è®¾è®¡é£æ ¼
- ğŸ“± å“åº”å¼å¸ƒå±€
- ğŸ”¢ å¤§å·éªŒè¯ç æ˜¾ç¤º
- â° æ¸…æ™°çš„æœ‰æ•ˆæœŸæç¤º
- âš ï¸ å®‰å…¨æé†’

## ğŸ¯ å‰ç«¯é›†æˆ

### 1. å®‰è£…ä¾èµ–

å‰ç«¯é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
VITE_API_URL=http://localhost:3000/api
```

### 2. ä½¿ç”¨API

```javascript
import { sendVerificationCode, verifyCode, register } from '@/api/auth.api'

// å‘é€éªŒè¯ç 
const result = await sendVerificationCode('test@qq.com')

// éªŒè¯éªŒè¯ç 
const verifyResult = await verifyCode('test@qq.com', '123456')

// æ³¨å†Œç”¨æˆ·
const registerResult = await register({
  email: 'test@qq.com',
  username: 'ç”¨æˆ·å',
  password: 'password123'
})
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Node.js** - è¿è¡Œç¯å¢ƒ
- **Express** - Webæ¡†æ¶
- **Nodemailer** - é‚®ä»¶å‘é€
- **Crypto** - åŠ å¯†éšæœºæ•°ç”Ÿæˆ
- **dotenv** - ç¯å¢ƒå˜é‡ç®¡ç†
- **CORS** - è·¨åŸŸæ”¯æŒ

## ğŸ“ å¼€å‘è®¡åˆ’

- [ ] é›†æˆæ•°æ®åº“ï¼ˆMySQL/MongoDBï¼‰
- [ ] JWTèº«ä»½éªŒè¯
- [ ] ç”¨æˆ·ä¼šè¯ç®¡ç†
- [ ] é‚®ç®±éªŒè¯çŠ¶æ€æŒä¹…åŒ–
- [ ] é€Ÿç‡é™åˆ¶ï¼ˆRate Limitingï¼‰
- [ ] æ—¥å¿—ç³»ç»Ÿ
- [ ] å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯

ISC
